<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Handle static assets (CSS, JS, images, etc.)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^assets/(.+)$ ../assets/$1 [L,NC]

    # Redirect to old site if requested
    RewriteRule ^old/?(.*)$ ../old/$1 [L,NC]

    # Handle service worker
    RewriteRule ^sw\.js$ ../sw.js [L,NC]
    
    # Handle manifest
    RewriteRule ^manifest\.php$ ../manifest.php [L,NC]

    # Handle all other requests through index.php (front controller)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?url=$1 [L,QSA]
</IfModule>